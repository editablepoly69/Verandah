<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Taste of India - Lusaka, Zambia</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;800&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary-gold: #FFD700;
            --dark-plum: #5C2A4F;
            --charcoal-green: #2A362B; /* Using this for darker elements */
            --off-white: #f0f2f5;
            --text-color: #222;
        }

        body {
            font-family: 'Inter', sans-serif;
            background-color: var(--off-white);
            color: var(--text-color);
        }
        .container {
            max-width: 1200px;
        }
        .menu-category-title {
            border-bottom: 3px solid var(--primary-gold); /* Gold accent */
            padding-bottom: 0.75rem;
            margin-bottom: 1.5rem;
            color: var(--charcoal-green); /* Darker text */
        }
        .menu-item-card {
            background-color: #ffffff;
            border-radius: 0.5rem; /* Less rounded corners */
            box-shadow: 0 6px 12px rgba(0, 0, 0, 0.1); /* Slightly softer shadow */
            transition: transform 0.3s ease-in-out, box-shadow 0.3s ease-in-out;
            overflow: hidden;
            position: relative;
            display: flex;
            flex-direction: column;
            /* Ensure the card itself doesn't stretch beyond its grid cell */
            width: 100%;
        }
        .menu-item-card:hover {
            transform: translateY(-5px) scale(1.01); /* Subtle lift on hover */
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.15); /* More pronounced shadow on hover */
        }
        .menu-item-content {
            flex-grow: 1;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
        }
        .price-tag {
            background-color: var(--primary-gold); /* Gold price tag */
            color: var(--charcoal-green); /* Dark text on gold */
            font-weight: 800;
            padding: 0.5rem 1rem;
            border-radius: 9999px;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
        }
        ::-webkit-scrollbar {
            width: 8px;
        }
        ::-webkit-scrollbar-track {
            background: #e0e0e0;
            border-radius: 10px;
        }
        ::-webkit-scrollbar-thumb {
            background: var(--primary-gold); /* Gold scrollbar */
            border-radius: 10px;
        }
        ::-webkit-scrollbar-thumb:hover {
            background: #e6b800; /* Darker gold on hover */
        }
        .image-container {
            position: relative;
            width: 100%;
            height: 18rem;
            background-color: #d1d5db; /* Lighter placeholder */
            display: flex;
            align-items: center;
            justify-content: center;
            border-top-left-radius: 0.5rem;
            border-top-right-radius: 0.5rem;
            overflow: hidden;
        }
        .image-container img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            border-top-left-radius: 0.5rem;
            border-top-right-radius: 0.5rem;
        }

        /* Header Specific Styles */
        .header-gradient {
            background: linear-gradient(to right, var(--dark-plum), var(--primary-gold)); /* Plum to Gold */
        }
        .header-logo {
            height: 200px; /* Adjust as needed */
            margin-bottom: 1rem;
        }

        /* Navigation Specific Styles */
        .nav-bar {
            background-color: var(--charcoal-green); /* Charcoal green nav bar */
        }
        .nav-link {
            color: var(--off-white); /* Off-white text for links */
            transition: background-color 0.3s ease-in-out, color 0.3s ease-in-out, box-shadow 0.3s ease-in-out;
            border-radius: 0.375rem; /* Subtle rounding for nav links */
        }
        .nav-link:hover {
            background-color: var(--primary-gold); /* Gold on hover */
            color: var(--charcoal-green); /* Dark text on gold hover */
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
        }
        .nav-link.active {
            background-color: var(--primary-gold); /* Gold for active state */
            color: var(--charcoal-green); /* Dark text on gold active */
            font-weight: bold;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.3);
        }

        /* Footer Specific Styles */
        .footer-bg {
            background-color: var(--charcoal-green); /* Charcoal green footer */
        }
    /* NEW: Styles for the Verandah logotype (text part) */
    .verandah-logotype {
        /*
         * Tailwind classes like h-24 md:h-32 lg:h-40 mb-3
         * are already handling the height and margin-bottom.
         * You can add any specific styles here that *only* apply
         * to the logotype and not the emblem.
         */
        max-width: 100%; /* Ensure it doesn't overflow */
        /* If your SVG has a fill and you want it to inherit text color: */
        /* fill: currentColor; */
    }

        /* Crucial: Grid Layout for Categories */
        .category-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr)); /* Responsive grid */
            gap: 2rem;
        }
    </style>
</head>
<body class="antialiased">
    <header class="header-gradient text-white p-6 shadow-xl">
        <div class="container mx-auto text-center">
            <img src="Images/Logo.png" alt="Verandah Logo" class="header-logo mx-auto">
           <img src="Images/logotype.svg" alt="Verandah Logotype" 
     class="verandah-logotype mx-auto h-16 md:h-20 lg:h-24 mb-3 max-w-full">
            <p class="text-md md:text-lg mt-2 font-medium">Come Hungry, Leave Whole, With Love</p>
        </div>
    </header>

    <nav id="main-nav" class="nav-bar sticky top-0 z-10 shadow-lg">
        <div class="container mx-auto px-4 py-3 flex flex-wrap justify-center space-x-3 md:space-x-6 text-sm md:text-base">
            <a href="#snacks" class="nav-link px-4 py-2">Snacks</a>
            <a href="#hot-pan" class="nav-link px-4 py-2">Hot Pan</a>
            <a href="#sweet-memories" class="nav-link px-4 py-2">Sweet Memories</a>
            <a href="#tiffin-box" class="nav-link px-4 py-2">Tiffin Box</a>
            <a href="#sips-brews" class="nav-link px-4 py-2">Sips & Brews</a>
        </div>
    </nav>

    <main class="container mx-auto p-4 md:p-8">

        <section id="snacks" class="menu-section mb-16">
            <h2 class="menu-category-title text-3xl md:text-5xl font-extrabold mb-6 pb-2 text-center uppercase">SNACKS / नाश्ता</h2>
            <p class="text-center text-gray-700 text-lg mb-10 italic font-semibold">Crunchy, tangy, sweet, spicy – a symphony of sharable bites straight from the vibrant streets of India!</p>
            <div class="category-grid">
                <p class="col-span-full text-center text-gray-600">Loading snacks...</p>
            </div>
        </section>

        <section id="hot-pan" class="menu-section mb-16">
            <h2 class="menu-category-title text-3xl md:text-5xl font-extrabold mb-6 pb-2 text-center uppercase">HOT PAN / गर्म गर्म तवा</h2>
            <p class="text-center text-gray-700 text-lg mb-10 italic font-semibold">Freshly made, irresistibly crispy, and fluffy delights infused with bold South Indian flavors!</p>
            <div class="category-grid">
                <p class="col-span-full text-center text-gray-600">Loading hot pan items...</p>
            </div>
        </section>

        <section id="sweet-memories" class="menu-section mb-16">
            <h2 class="menu-category-title text-3xl md:text-5xl font-extrabold mb-6 pb-2 text-center uppercase">SWEET MEMORIES / मिठाई</h2>
            <p class="text-center text-gray-700 text-lg mb-10 italic font-semibold">Delicious Indian sweets and baked delights made with pure sweetness, rich ghee, and a touch of love!</p>
            <div class="category-grid">
                <p class="col-span-full text-center text-gray-600">Loading sweets...</p>
            </div>
        </section>

        <section id="tiffin-box" class="menu-section mb-16">
            <h2 class="menu-category-title text-3xl md:text-5xl font-extrabold mb-6 pb-2 text-center uppercase">TIFFIN BOX / तिफन</h2>
            <p class="text-center text-gray-700 text-lg mb-10 italic font-semibold">For when school tiffin nostalgia hits... Homemade meals ready to go, packed with love and flavor!</p>
            <div class="category-grid">
                <p class="col-span-full text-center text-gray-600">Loading tiffin items...</p>
            </div>
        </section>

        <section id="sips-brews" class="menu-section mb-16">
            <h2 class="menu-category-title text-3xl md:text-5xl font-extrabold mb-6 pb-2 text-center uppercase">SIPS & BREWS / चुस्किया</h2>
            <p class="text-center text-gray-700 text-lg mb-10 italic font-semibold">Freshly brewed, artfully made, hot or cold, with love and grace – perfect sips to complement your meal!</p>
            <div class="category-grid">
                <p class="col-span-full text-center text-gray-600">Loading drinks...</p>
            </div>
        </section>

    </main>

    <footer class="footer-bg text-white p-6 text-center rounded-t-lg mt-12">
        <div class="container mx-auto">
            <p class="text-lg font-medium">&copy; 2025 Verandah Cafe & Restaurant. All rights reserved.</p>
            <p class="text-sm mt-3">Designed with ❤️ by miniskirtbegum</p>
        </div>
    </footer>

    <script>
        // !!! IMPORTANT: YOU MUST REPLACE THIS PLACEHOLDER URL !!!
        // Get your actual deployed Google Apps Script Web App URL by following these steps:
        // 1. Go to your Google Apps Script project.
        // 2. Click "Deploy" -> "New deployment".
        // 3. For "Select type", choose "Web app".
        // 4. Set "Execute as:" to "Me".
        // 5. Set "Who has access:" to "Anyone".
        // 6. Click "Deploy".
        // 7. Copy the "Web app URL". It will look something like:
        //    https://script.google.com/macros/s/AKfycb.../exec
        const SPREADSHEET_URL = 'https://script.google.com/macros/s/AKfycbx41WrBdeBkAnE4Qj-pqVhczFZfN2NytDXkBus_7bWGESCo5LjsTw9LGu4DKKe3k4_Y/exec'; // <--- REPLACE THIS LINE!

        // Function to create a menu item card
        function createMenuItemCard(item) {
            if (!item.Title || !item.PriceString || !item.CategoryID) {
                console.warn('Skipping item due to missing critical data (Title, Price, or CategoryID):', item);
                return null;
            }

            const card = document.createElement('div');
            card.className = 'menu-item-card';

            const subtitleText = item.Subtitle ? String(item.Subtitle) : '';
            const titleText = item.Title ? String(item.Title) : 'Unnamed Item';
            const priceText = item.PriceString ? String(item.PriceString) : 'N/A';
            const dishDescriptionText = item.ImageDishDescription ? String(item.ImageDishDescription) : 'A delicious dish.';
            
            const imageUrl = item.ImageURL ? String(item.ImageURL) : 'https://placehold.co/600x400/CCCCCC/333333?text=Image+Not+Available&font=inter';
            const imageAltText = item.ImageDishName ? String(item.ImageDishName) : titleText;

            card.innerHTML = `
                <div class="image-container">
                    <img data-src="${imageUrl}" alt="${imageAltText}" class="w-full h-full object-cover lazyload">
                </div>
                <div class="p-6 menu-item-content">
                    <div>
                        <h3 class="text-2xl font-bold text-gray-900 mb-1">${titleText}</h3>
                        ${subtitleText ? `<p class="text-sm text-gray-600 mb-3">${subtitleText}</p>` : ''}
                        <p class="text-gray-700 text-sm mb-4 leading-relaxed">${dishDescriptionText}</p>
                    </div>
                    <div class="flex justify-between items-center mt-auto pt-4">
                        <span class="text-3xl font-extrabold price-tag">${priceText}</span>
                    </div>
                </div>
            `;
            return card;
        }

        // Function to handle lazy loading of images
        function lazyLoadImages() {
            const lazyImages = document.querySelectorAll('img.lazyload');
            const observer = new IntersectionObserver((entries, observer) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        const img = entry.target;
                        img.src = img.dataset.src;
                        img.classList.remove('lazyload');
                        observer.unobserve(img);
                    }
                });
            }, {
                rootMargin: '0px 0px 50px 0px'
            });

            lazyImages.forEach(img => {
                observer.observe(img);
            });
        }

        // Function to handle navigation highlighting on scroll
        function setupNavigationHighlighting() {
            const sections = document.querySelectorAll('.menu-section');
            const navLinks = document.querySelectorAll('.nav-link');
            const navHeight = document.getElementById('main-nav').offsetHeight;

            const observerOptions = {
                root: null, // viewport
                rootMargin: `-${navHeight + 20}px 0px -50% 0px`, // Adjust based on your preferred trigger point
                threshold: 0
            };

            const observer = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    const id = entry.target.id;
                    const navLink = document.querySelector(`.nav-link[href="#${id}"]`);

                    if (entry.isIntersecting) {
                        navLinks.forEach(link => link.classList.remove('active'));
                        if (navLink) {
                            navLink.classList.add('active');
                        }
                    }
                });
            }, observerOptions);

            sections.forEach(section => {
                observer.observe(section);
            });

            navLinks.forEach(link => {
                link.addEventListener('click', function(e) {
                    navLinks.forEach(l => l.classList.remove('active'));
                    this.classList.add('active');
                });
            });
        }

        async function fetchAndDisplayMenu() {
            if (!SPREADSHEET_URL || SPREADSHEET_URL === 'YOUR_ACTUAL_GOOGLE_APPS_SCRIPT_WEB_APP_URL_HERE') {
                document.querySelectorAll('.category-grid').forEach(grid => {
                    grid.innerHTML = '<p class="col-span-full text-center text-red-600 font-bold">Error: Google Apps Script Web App URL not configured correctly. Please update SPREADSHEET_URL in the JavaScript.</p>';
                });
                return;
            }

            try {
                const response = await fetch(SPREADSHEET_URL);
                if (!response.ok) {
                    console.error(`HTTP error! status: ${response.status} - ${response.statusText}`);
                    throw new Error(`HTTP error! status: ${response.status} - Could not connect to Google Apps Script.`);
                }
                const menuItems = await response.json();

                if (menuItems.error) {
                    console.error("Error from Google Apps Script:", menuItems.error);
                    document.querySelectorAll('.category-grid').forEach(grid => {
                        grid.innerHTML = `<p class="col-span-full text-center text-red-600 font-bold">Error fetching menu data from Apps Script: ${menuItems.error}</p>`;
                    });
                    return;
                }

                document.querySelectorAll('.category-grid').forEach(grid => grid.innerHTML = '');

                const itemsByCategory = {};
                menuItems.forEach(item => {
                    const categoryId = item.CategoryID ? String(item.CategoryID).toLowerCase().replace(/\s/g, '-') : '';
                    if (categoryId) {
                        if (!itemsByCategory[categoryId]) {
                            itemsByCategory[categoryId] = [];
                        }
                        itemsByCategory[categoryId].push(item);
                    } else {
                        console.warn('Skipping item due to missing or invalid CategoryID:', item);
                    }
                });

                let populatedAnyCategory = false;
                for (const categoryId in itemsByCategory) {
                    const categoryContainer = document.getElementById(categoryId);
                    if (categoryContainer) {
                        const grid = categoryContainer.querySelector('.category-grid');
                        if (grid) {
                            if (itemsByCategory[categoryId].length === 0) {
                                grid.innerHTML = '<p class="col-span-full text-center text-gray-600">No items in this category yet.</p>';
                            } else {
                                itemsByCategory[categoryId].forEach(item => {
                                    const card = createMenuItemCard(item);
                                    if (card) {
                                        grid.appendChild(card);
                                        populatedAnyCategory = true;
                                    }
                                });
                            }
                        } else {
                            console.warn(`No .category-grid found inside section #${categoryId}.`);
                        }
                    } else {
                        console.warn(`HTML section with ID "#${categoryId}" not found for category "${categoryId}". Check if spreadsheet CategoryID matches HTML section ID.`);
                    }
                }

                if (!populatedAnyCategory && menuItems.length > 0) {
                    console.warn("Menu data was fetched, but no items were displayed. Please ensure 'CategoryID' in your spreadsheet exactly matches the 'id' attributes of your <section> elements (e.g., 'snacks', 'hot-pan'), and that item data is complete for each entry.");
                } else if (menuItems.length === 0) {
                    document.querySelectorAll('.category-grid').forEach(grid => {
                        grid.innerHTML = '<p class="col-span-full text-center text-gray-600">The menu is currently empty. Please add items to your Google Sheet.</p>';
                    });
                }
                
                lazyLoadImages();
                setupNavigationHighlighting();
            } catch (error) {
                console.error('Failed to fetch or display menu:', error);
                document.querySelectorAll('.category-grid').forEach(grid => {
                    grid.innerHTML = `<p class="col-span-full text-center text-red-600 font-bold">Could not load menu: ${error.message}. Please check your Google Apps Script URL and ensure it's deployed correctly and accessible by "Anyone".</p>`;
                });
            }
        }

        window.onload = function() {
            fetchAndDisplayMenu();
        };
    </script>
</body>
</html>
